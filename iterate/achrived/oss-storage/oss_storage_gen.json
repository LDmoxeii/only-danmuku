[
  {
    "tag": "cli",
    "package": "file_upload_session",
    "name": "UploadVideoChunkStorage",
    "desc": "保存视频上传分片到临时存储（当前本地实现，可扩展为 OSS）",
    "requestFields": [
      { "name": "tempPath", "type": "String", "desc": "上传会话临时目录（相对路径或对象前缀）" },
      { "name": "chunkIndex", "type": "Int" },
      { "name": "chunkFile", "type": "MultipartFile" }
    ],
    "responseFields": [
      { "name": "storedPath", "type": "String", "desc": "实际存储路径或对象 key" },
      { "name": "size", "type": "Long" }
    ]
  },
  {
    "tag": "cli",
    "package": "file_storage",
    "name": "UploadImageResource",
    "desc": "上传图片到 OSS 并返回资源 key",
    "requestFields": [
      { "name": "file", "type": "MultipartFile" },
      { "name": "createThumbnail", "type": "Boolean", "defaultValue": "false" },
      { "name": "bizType", "type": "String", "desc": "AVATAR/COVER/CATEGORY/COMMON" }
    ],
    "responseFields": [
      { "name": "resourceKey", "type": "String" },
      { "name": "thumbnailKey", "type": "String", "nullable": true },
      { "name": "publicUrl", "type": "String", "nullable": true }
    ]
  },
  {
    "tag": "cli",
    "package": "video_storage",
    "name": "UploadVideoAbrOutput",
    "desc": "上传 ABR 输出目录到 OSS（含 master/variants/segments）",
    "requestFields": [
      { "name": "localOutputDir", "type": "String" },
      { "name": "encOutputDir", "type": "String", "nullable": true },
      { "name": "objectPrefix", "type": "String", "nullable": true }
    ],
    "responseFields": [
      { "name": "success", "type": "Boolean", "defaultValue": "true" },
      { "name": "storagePrefix", "type": "String" },
      { "name": "encPrefix", "type": "String", "nullable": true },
      { "name": "failReason", "type": "String", "nullable": true }
    ]
  },
  {
    "tag": "qry",
    "package": "file_storage",
    "name": "GetResourceAccessUrl",
    "desc": "根据资源 key 返回可访问 URL（OSS）",
    "requestFields": [
      { "name": "resourceKey", "type": "String" },
      { "name": "preferPresign", "type": "Boolean", "defaultValue": "false" },
      { "name": "expireSeconds", "type": "Int", "defaultValue": "600" }
    ],
    "responseFields": [
      { "name": "url", "type": "String" }
    ]
  },
  {
    "tag": "qry",
    "package": "video_storage",
    "name": "GetVideoHlsResourceUrl",
    "desc": "获取 HLS 资源 URL（master/playlist/segment）",
    "requestFields": [
      { "name": "videoFileId", "type": "Long" },
      { "name": "relativePath", "type": "String", "desc": "如 master.m3u8 或 720p/index.m3u8" }
    ],
    "responseFields": [
      { "name": "url", "type": "String" },
      { "name": "contentType", "type": "String", "nullable": true }
    ]
  },
  {
    "tag": "payload",
    "package": "file_storage",
    "name": "FrontGetFileResource",
    "desc": "获取图片/通用资源（返回 URL 或直接内容）",
    "requestFields": [
      { "name": "sourceName", "type": "String" }
    ],
    "responseFields": [
      { "name": "url", "type": "String", "nullable": true },
      { "name": "contentType", "type": "String", "nullable": true },
      { "name": "exists", "type": "Boolean" }
    ]
  },
  {
    "tag": "payload",
    "package": "video_storage",
    "name": "FrontGetAbrMaster",
    "desc": "前台：获取 ABR master.m3u8（URL 或内容）",
    "requestFields": [
      { "name": "fileId", "type": "Long" }
    ],
    "responseFields": [
      { "name": "url", "type": "String", "nullable": true },
      { "name": "content", "type": "String", "nullable": true }
    ]
  }
]
