flowchart TD
  N1[[GetCommentByIdQryHandler]]
  class N1 queryhandler
  N2([VideoCommentController::post])
  class N2 controllermethod
  N3[[SendCommentMessageCmd.Handler]]
  class N3 commandhandler
  N4{{SendCommentMessageCmd.Request}}
  class N4 command
  N5[[SendReplyMessageCmd.Handler]]
  class N5 commandhandler
  N6{{SendReplyMessageCmd.Request}}
  class N6 command
  N7[[UpdateStatisticsInfoCmd.Handler]]
  class N7 commandhandler
  N8{{UpdateStatisticsInfoCmd.Request}}
  class N8 command
  N9[[ApplyVideoCommentCountDeltaCmd.Handler]]
  class N9 commandhandler
  N10{{ApplyVideoCommentCountDeltaCmd.Request}}
  class N10 command
  N11[[PostCommentCmd.Handler]]
  class N11 commandhandler
  N12{{PostCommentCmd.Request}}
  class N12 command
  N13{{GetCommentByIdQry.Request}}
  class N13 query
  N14[[CustomerMessageCollectionCreatedDomainEventSubscriber::on]]
  class N14 domaineventhandler
  N15[[CustomerMessageCommentMentionCreatedDomainEventSubscriber::on]]
  class N15 domaineventhandler
  N16[[CustomerMessageLikeCreatedDomainEventSubscriber::on]]
  class N16 domaineventhandler
  N17[[CustomerMessagePrivateCreatedDomainEventSubscriber::on]]
  class N17 domaineventhandler
  N18[[CustomerMessageSystemCreatedDomainEventSubscriber::on]]
  class N18 domaineventhandler
  N19[[StatisticsCountUpdatedDomainEventSubscriber::on]]
  class N19 domaineventhandler
  N20[[VideoCommentCountDeltaAppliedDomainEventSubscriber::on]]
  class N20 domaineventhandler
  N21[[CommentPostedDomainEventSubscriber::on]]
  class N21 domaineventhandler
  N22[[CommentPostedDomainEventSubscriber::on1]]
  class N22 domaineventhandler
  N23[[CommentPostedDomainEventSubscriber::on2]]
  class N23 domaineventhandler
  N24(CustomerMessage::onCreate)
  class N24 entitymethod
  N25((CustomerMessageCollectionCreatedDomainEvent))
  class N25 domainevent
  N26((CustomerMessageCommentMentionCreatedDomainEvent))
  class N26 domainevent
  N27((CustomerMessageLikeCreatedDomainEvent))
  class N27 domainevent
  N28((CustomerMessagePrivateCreatedDomainEvent))
  class N28 domainevent
  N29((CustomerMessageSystemCreatedDomainEvent))
  class N29 domainevent
  N30(Statistics::onCreate)
  class N30 entitymethod
  N31(Statistics::updateCount)
  class N31 entitymethod
  N32((StatisticsCountUpdatedDomainEvent))
  class N32 domainevent
  N33(Video::&lt;get-commentCount&gt;)
  class N33 entitymethod
  N34(Video::&lt;get-customerId&gt;)
  class N34 entitymethod
  N35(Video::&lt;get-id&gt;)
  class N35 entitymethod
  N36(Video::applyCommentCountDelta)
  class N36 entitymethod
  N37((VideoCommentCountDeltaAppliedDomainEvent))
  class N37 domainevent
  N38(VideoComment::&lt;get-customerId&gt;)
  class N38 entitymethod
  N39(VideoComment::&lt;get-id&gt;)
  class N39 entitymethod
  N40(VideoComment::onCreate)
  class N40 entitymethod
  N41((CommentPostedDomainEvent))
  class N41 domainevent
  N2 -->|ControllerMethodToCommand| N12
  N2 -->|ControllerMethodToQuery| N13
  N3 -->|CommandHandlerToEntityMethod| N24
  N3 -->|CommandHandlerToEntityMethod| N34
  N4 -->|CommandToCommandHandler| N3
  N5 -->|CommandHandlerToEntityMethod| N24
  N5 -->|CommandHandlerToEntityMethod| N38
  N6 -->|CommandToCommandHandler| N5
  N7 -->|CommandHandlerToEntityMethod| N30
  N7 -->|CommandHandlerToEntityMethod| N31
  N8 -->|CommandToCommandHandler| N7
  N9 -->|CommandHandlerToEntityMethod| N33
  N9 -->|CommandHandlerToEntityMethod| N35
  N9 -->|CommandHandlerToEntityMethod| N36
  N10 -->|CommandToCommandHandler| N9
  N11 -->|CommandHandlerToEntityMethod| N34
  N11 -->|CommandHandlerToEntityMethod| N39
  N11 -->|CommandHandlerToEntityMethod| N40
  N12 -->|CommandToCommandHandler| N11
  N13 -->|QueryToQueryHandler| N1
  N20 -->|DomainEventHandlerToCommand| N8
  N21 -->|DomainEventHandlerToCommand| N10
  N22 -->|DomainEventHandlerToCommand| N4
  N23 -->|DomainEventHandlerToCommand| N6
  N23 -->|DomainEventHandlerToQuery| N13
  N24 -->|EntityMethodToDomainEvent| N25
  N24 -->|EntityMethodToDomainEvent| N26
  N24 -->|EntityMethodToDomainEvent| N27
  N24 -->|EntityMethodToDomainEvent| N28
  N24 -->|EntityMethodToDomainEvent| N29
  N25 -->|DomainEventToHandler| N14
  N26 -->|DomainEventToHandler| N15
  N27 -->|DomainEventToHandler| N16
  N28 -->|DomainEventToHandler| N17
  N29 -->|DomainEventToHandler| N18
  N31 -->|EntityMethodToDomainEvent| N32
  N32 -->|DomainEventToHandler| N19
  N36 -->|EntityMethodToDomainEvent| N37
  N37 -->|DomainEventToHandler| N20
  N40 -->|EntityMethodToDomainEvent| N41
  N41 -->|DomainEventToHandler| N21
  N41 -->|DomainEventToHandler| N22
  N41 -->|DomainEventToHandler| N23
  classDef command fill:#FDBA74,stroke:#C2410C,color:#111827
  classDef commandhandler fill:#F97316,stroke:#9A3412,color:#111827
  classDef controllermethod fill:#FDE68A,stroke:#B45309,color:#111827
  classDef domainevent fill:#FECACA,stroke:#B91C1C,color:#111827
  classDef domaineventhandler fill:#F87171,stroke:#991B1B,color:#111827
  classDef entitymethod fill:#F3F4F6,stroke:#6B7280,color:#111827
  classDef query fill:#93C5FD,stroke:#1D4ED8,color:#0F172A
  classDef queryhandler fill:#3B82F6,stroke:#1E40AF,color:#F8FAFC
